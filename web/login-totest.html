
<!DOCTYPE html>
<html lang="en" class="no-js">

    <head>

        <meta charset="utf-8">
        <title>Fullscreen Login</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- CSS -->
        <link rel="stylesheet" href="./login/css/reset.css">
        <link rel="stylesheet" href="./login/css/supersized.css">
        <link rel="stylesheet" href="./login/css/style.css">

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js">
        </script>
        <script src="./js/glo.js">
        </script>
    </head>

    <body oncontextmenu="return false"  background="./login/img/1.jpg">

        <div class="page-container" >
            <h1>Login</h1>
            <form action="" method="post">
				<div>
					<input type="text" id="loginId" name="username" class="username" placeholder="Username" autocomplete="off"/>
				</div>
                <div>
					<input type="password" id="pwd"  name="password" class="password" placeholder="Password" oncontextmenu="return false" onpaste="return false" />
                </div>
                <button  id="loginBtn"  type="button">Sign in</button>
            </form>
            <div class="connect">
                <p>If we can only encounter each other rather than stay with each other,then I wish we had never encountered.</p>
				<p style="margin-top:20px;">如果只是遇见，不能停留，不如不遇见。</p>
            </div>
        </div>
		<div class="alert" style="display:none">
			<h2>消息</h2>
			<div class="alert_con">
				<p id="ts"></p>
				<p style="line-height:70px"><a class="btn">确定</a></p>
			</div>
		</div>

        <!-- Javascript -->
		<script src="http://apps.bdimg.com/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
<!--        <script src="./login/js/supersized.3.2.7.min.js"></script>-->
<!--        <script src="./login/js/supersized-init.js"></script>-->
		<script>
		// $(".btn").click(function(){
		// 	is_hide();
		// })
		// var u = $("input[name=username]");
		// var p = $("input[name=password]");
        var loginId=  $(" #loginId ").val()
        var pwd=  $(" #pwd ").val()

        $("#loginBtn").on("click",function(){

             debugger;
			if(loginId == '' || pwd =='')
			{
				$("#ts").html("用户名或密码不能为空~");
				is_show();
				return false;
			}
			else{
				var reg = /^[0-9A-Za-z]+$/;
				if(!reg.exec(loginId))
				{
					$("#ts").html("用户名错误");
					is_show();
					return false;
				}


                // var loginId=u.val();
                // var pwd=p.val();
                var params={"loginId":loginId,"pwd":pwd}
                $.ajax({
                    url: "/api/v1/user/login",
                    async: false,//这一步是非常重要的，作用是设置为同步执行
                    data:params,
                    // dataType: "json",
                    traditional:true,
                    crossDomain: true,
                    success: function (data) {
                        debugger

                        if (!data.success) {
                            alert(data.msg)
                            retrun ;
                        }
                        setCookie("zticket",data.ticket);
                        window.document.zticket = "ticket="+data.ticket;
                        // window.zticket=data.ticket;
                        $(location).attr('href', "/admin_manger_layui.html");

                    },
                    fail: function (e) {
                        alert("fail");
                    },
                    error: function (e) {
                        debugger
                        alert("error=" + e.message);
                    }

                });
			}
		});
		window.onload = function()
		{
			$(".connect p").eq(0).animate({"left":"0%"}, 600);
			$(".connect p").eq(1).animate({"left":"0%"}, 400);
		}
		function is_hide(){ $(".alert").animate({"top":"-40%"}, 300) }
		function is_show(){ $(".alert").show().animate({"top":"45%"}, 300) }
		</script>
    </body>

</html>

