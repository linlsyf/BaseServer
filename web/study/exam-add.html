<!doctype html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Amaze UI Admin form Examples</title>
  <meta name="description" content="这是一个form页面">
  <meta name="keywords" content="form">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <link rel="icon" type="image/png" href="../assets/i/favicon.png">
  <link rel="apple-touch-icon-precomposed" href="../assets/i/app-icon72x72@2x.png">
  <meta name="apple-mobile-web-app-title" content="Amaze UI" />
  <link rel="stylesheet" href="../assets/css/amazeui.min.css"/>
  <link rel="stylesheet" href="../assets/css/admin.css">
  <link rel="stylesheet" href="../layui/css/layui.css"  media="all">

</head>
<body>
<script src="../layui/layui.js" charset="utf-8"></script>

<!--[if lte IE 9]>
<p class="browsehappy">你正在使用<strong>过时</strong>的浏览器，Amaze UI 暂不支持。 请 <a href="http://browsehappy.com/" target="_blank">升级浏览器</a>
  以获得更好的体验！</p>
<![endif]-->


  <!-- sidebar end -->
<!-- content start -->
<div class="admin-content">

      <div  id="tab2">
        <form class="am-form">
          <div class="am-g am-margin-top">
            <div class="col-sm-2 am-text-right">
              文章标题
            </div>
            <div class="col-sm-4">
              <input  id="contentName"   type="text" class="am-input-sm">
            </div>
            <div class="col-sm-6">*必填，不可重复</div>
          </div>

          <div class="am-g am-margin-top">菜
            <div class="col-sm-2 am-text-right">
              类别
            </div>

            <div class="col-sm-4">
              <div class="am-form-group am-margin-left am-fl">
                <select id="typeselct">
                  <option value="type_study_common">所有类别</option>
                  <option value="type_study_mysql">MYSQL数据库设计</option>
                  <option value="type_study_sof">软件工程</option>
                  <option value="type_study_c++">C++</option>
                  <option value="type_study_java">JAVA语言与设计</option>
                  <option value="type_study_history">近代史（本科）</option>

                </select>
              </div>
            </div>
            <div class="col-sm-6">选填</div>
          </div>


          <div class="am-g am-margin-top">
            <label class="layui-form-label">历年真题年份</label>
            <div class="layui-input-inline">
              <input type="text"   class="layui-input" id="historyyear"  placeholder="yyyy-MM">
              <div class="col-sm-6">选填</div>
            </div>


          </div>

          <div class="am-g am-margin-top">
            <div class="col-sm-2 am-text-right">
              正确选项
            </div>
            <div class="col-sm-4">
              <div class="am-form-group am-margin-left am-fl">
                <select id="rightselct">
                  <option value="a">A</option>
                  <option value="b">B</option>
                  <option value="c">C</option>
                  <option value="d">D</option>
                </select>
              </div>
            </div>
            <div class="col-sm-6">选填</div>
          </div>

          <div class="am-g am-margin-top">
            <div class="col-sm-2 am-text-right">
              选择题填空题？
            </div>
            <div class="col-sm-4">
              <div class="am-form-group am-margin-left am-fl">
                <select id="data_type">
                  <option value="type_select">选择题</option>
                  <option value="type_completion">填空题</option>
                  <option value="type_answers">问答题</option>
                </select>
              </div>
            </div>
            <div class="col-sm-6">选填</div>
          </div>

          <div class="am-g am-margin-top-sm">
            <div class="col-sm-2 am-text-right">
              内容描述
            </div>
            <div class="col-sm-10">
              <textarea     id="contentTx"    rows="10" placeholder="请使用富文本编辑插件"></textarea>
            </div>
          </div>

        </form>
        <div class="am-form-group" >
          <div class="col-sm-9 col-sm-push-3">
            <button type="button"      id="saveBtn"  class="am-btn am-btn-primary">保存修改</button>
          </div>
        </div>
      </div>


    </div>
  </div>

</div>
<!-- content end -->

</div>



<script src="../assets/js/zepto.min.js"></script>
<script src="../assets/js/amazeui.min.js"></script>
<script src="../assets/js/app.js"></script>

<script src="../js/glo.js">
</script>
</body>



<script type="text/javascript">
      debugger;

      layui.use('laydate', function(){
        var laydate = layui.laydate;

        //年月选择器
        laydate.render({
          elem: '#historyyear'
          ,type: 'month'
        });



      });
    //checkLogin();
    $("#saveBtn").on("click",function(){

// 这里的this指向触发点击事件的p元素(Element)
        debugger

        var contentName=  $(" #contentName").val()
//        var contentA=  $(" #contentA").val()
//        var contentB=  $(" #contentB").val()
//        var contentC=  $(" #contentC").val()
//        var contentD=  $(" #contentD").val()
        var contentTx=  $(" #contentTx").val()
       var type = $(" #typeselct").val()
       var historyyear = $(" #historyyear").val()
       var resultRight = $(" #rightselct").val()
      var data_type = $(" #data_type").val()



        var   typename=$("#typeselct").find("option:selected").text();


//        var zticket=getCookie("zticket")
              if(""==zticket){

              alert("请先登录")
           }
         debugger
        var zticket=getCookie("zticket")


        var params={ticket: zticket,"name":contentName,"result_right":resultRight,"content":contentTx,
            'type':type,
            'typename':typename,
            'historyyear':historyyear,
            'data_type':data_type
              }

        $.ajax({
            url: "/api/v1/exam/add",
            async: false,//这一步是非常重要的，作用是设置为同步执行
            data:params,
            dataType: "json",
            traditional:true,
            crossDomain: true,
            success: function (data) {

                    alert(data.msg)

             //   $(location).attr('href', "/admin-exam-list.html");

            },
            fail: function (e) {
                alert("fail");
            },
            error: function (e) {
                alert("error=" + e.message);
            }

        });


    });


</script>



</html>
